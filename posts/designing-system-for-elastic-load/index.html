<!doctype html><html lang=en>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>Designing application for elastic load, not predictive load - akshay bansod</title><link rel=apple-touch-icon href=/images/favicons/apple-touch-icon.png sizes=180x180>
<link rel=icon href=/images/favicons/favicon-32x32.png sizes=32x32 type=image/png>
<link rel=icon href=/images/favicons/favicon-16x16.png sizes=16x16 type=image/png>
<link rel=manifest href=/images/favicons/manifest.json>
<link rel=icon href=/images/favicons/favicon.ico>
<meta name=keywords content>
<meta name=description content><meta itemprop=name content="Designing application for elastic load, not predictive load">
<meta itemprop=description content><meta itemprop=datePublished content="2021-09-22T16:09:51+05:30">
<meta itemprop=dateModified content="2021-09-22T16:09:51+05:30">
<meta itemprop=wordCount content="990">
<meta itemprop=keywords content="System Design,Distributed Systems,"><meta property="og:title" content="Designing application for elastic load, not predictive load">
<meta property="og:description" content>
<meta property="og:type" content="article">
<meta property="og:url" content="/posts/designing-system-for-elastic-load/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2021-09-22T16:09:51+05:30">
<meta property="article:modified_time" content="2021-09-22T16:09:51+05:30">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="Designing application for elastic load, not predictive load">
<meta name=twitter:description content>
<meta data-name=palette content="teal"><link rel=preload href=/css/bundle.min.584ad61bfb9121e174610ca0716e7303fbd4708cb91ca3f4b802d8d6d4745f84.css integrity="sha256-WErWG/uRIeF0YQygcW5zA/vUcIy5HKP0uALY1tR0X4Q=" crossorigin=anonymous as=style onload="this.rel='stylesheet'">
<noscript><link rel=stylesheet href=/css/bundle.min.584ad61bfb9121e174610ca0716e7303fbd4708cb91ca3f4b802d8d6d4745f84.css integrity="sha256-WErWG/uRIeF0YQygcW5zA/vUcIy5HKP0uALY1tR0X4Q=" crossorigin=anonymous></noscript><script src=/js/bundle.min.1b355f6f07fa404b74a69aa002c016dc63dae903950cb84d540f0f60675460c1.js integrity="sha256-GzVfbwf6QEt0ppqgAsAW3GPa6QOVDLhNVA8PYGdUYME=" crossorigin=anonymous></script>
</head><body><header><nav class="navbar navbar-expand-xl fixed-top">
<div class=container>
<a class=navbar-brand href=/>
<img class=logo alt=Logo src=/images/Akshay_Bansod_logo.png width=64 height=64 loading=lazy>
Akshay Bansod</a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbarSupportedContent aria-controls=navbarSupportedContent aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span>
</button>
<div class="collapse navbar-collapse" id=navbarSupportedContent>
<ul class="navbar-nav me-1 mb-2 mb-lg-0"><form class="search-bar d-flex ms-1" action=/search>
<div class="input-group input-group-sm">
<button class="btn btn-search disabled position-absolute left-0" type=submit aria-label=submit><i class="fas fa-fw fa-search"></i></button>
<input class="form-control rounded-pill" id=searchQuery name=q type=search aria-label=Search>
</div>
</form></ul><ul class="navbar-nav me-1 mb-2 mb-lg-0 me-1 ms-auto"><li class=nav-item>
<a class=nav-link href=/archives/>
<i class="fas fa-fw fa-file-archive"></i>Archives
</a>
</li><li class=nav-item>
<a class=nav-link href=/categories/>
<i class="fas fa-fw fa-folder"></i>Categories
</a>
</li><li class=nav-item>
<a class=nav-link href=/tags/>
<i class="fas fa-fw fa-tags"></i>Tags
</a>
</li><li class=nav-item>
<a class=nav-link href=/series/>
<i class="fas fa-fw fa-columns"></i>Series
</a>
</li><li class=nav-item>
<a class=nav-link data-bs-toggle=offcanvas href=#offcanvasSettings role=button aria-controls=offcanvasSettings>
<i class="fas fa-fw fa-sliders-h"></i> Settings
</a>
</li>
<div class="offcanvas offcanvas-end surface h-100" tabindex=-1 id=offcanvasSettings aria-labelledby=offcanvasSettingsLabel>
<div class=offcanvas-header>
<h5 class=offcanvas-title w id=offcanvasSettingsLabel><i class="fas fa-fw fa-sliders-h"></i> Settings</h5>
<a role=button data-bs-dismiss=offcanvas aria-label=Close>
<span class="fas fa-2x fa-fw fa-times"></span>
</a>
</div>
<div class=offcanvas-body><section class=setting>
<form class=row>
<div class=col-auto>
<label><i class="fas fa-fw fa-adjust"></i> Mode</label>
</div>
<div class="col-auto ms-auto">
<div class="form-check form-switch">
<input class=form-check-input type=checkbox id=modeSwitcher>
</div>
</div>
</form>
</section>
<section class=setting>
<form class="font-size-switcher-form row">
<div class=col-auto>
<label for=fontSize class=form-label><i class="fas fa-fw fa-font"></i> Font Size</label>
</div>
<div class="col-auto ms-auto">
<input type=range class=form-range min=-2 max=2 id=fontSize>
</div>
</form>
</section>
<section class="setting palettes">
<form class=row>
<div class=col-auto>
<label><i class="fas fa-fw fa-palette"></i> Palette</label>
</div>
<div class="col-auto ms-auto">
<span id=btnPalette class="btn btn-sm"><i class="fas fa-eye-dropper"></i></span>
</div>
</form>
<div class="container mt-2 visually-hidden" id=palettePicker>
<div class=btn-group><button type=button id=palette-blue title=Blue class="btn btn-sm palette bg-blue d-flex align-items-center justify-content-center">
</button><button type=button id=palette-blue-gray title="Blue Gray" class="btn btn-sm palette bg-blue-gray d-flex align-items-center justify-content-center">
</button><button type=button id=palette-brown title=Brown class="btn btn-sm palette bg-brown d-flex align-items-center justify-content-center">
</button><button type=button id=palette-cyan title=Cyan class="btn btn-sm palette bg-cyan d-flex align-items-center justify-content-center">
</button><button type=button id=palette-green title=Green class="btn btn-sm palette bg-green d-flex align-items-center justify-content-center">
</button><button type=button id=palette-indigo title=Indigo class="btn btn-sm palette bg-indigo d-flex align-items-center justify-content-center">
</button><button type=button id=palette-orange title=Orange class="btn btn-sm palette bg-orange d-flex align-items-center justify-content-center">
</button><button type=button id=palette-pink title=Pink class="btn btn-sm palette bg-pink d-flex align-items-center justify-content-center">
</button><button type=button id=palette-purple title=Purple class="btn btn-sm palette bg-purple d-flex align-items-center justify-content-center">
</button><button type=button id=palette-red title=Red class="btn btn-sm palette bg-red d-flex align-items-center justify-content-center">
</button><button type=button id=palette-teal title=Teal class="btn btn-sm palette bg-teal d-flex align-items-center justify-content-center">
</button><button type=button id=palette-yellow title=Yellow class="btn btn-sm palette bg-yellow d-flex align-items-center justify-content-center">
</button></button>
</div>
</div>
</section></div>
</div></ul>
</div>
</div>
</nav>
</header>
<main role=main class=container>
<div class="row content">
<div class=col-lg-8>
<div class=container><nav class=row aria-label=breadcrumb>
<ol class="breadcrumb surface"><li class=breadcrumb-item><a href=/>Home</a></li><li class=breadcrumb-item><a href=/posts/>Posts</a></li><li class="breadcrumb-item active">Designing Application for Elastic Load, Not Predictive Load</li></ol>
</nav><article class="post row surface"><div class=post-panel-wrapper>
<div class="post-panel d-flex flex-column">
<a id=sidebarToggler class="action d-none d-lg-block" role=button>
<i class="fas fa-fw fa-expand-alt fa-rotate-45"></i>
</a>
<a id=btnTOC class="fas fa-fw fa-list-alt" data-bs-toggle=offcanvas href=#offcanvasTOC aria-controls=offcanvasTOC role=button>
</a>
</div>
</div>
<h1 class="post-title my-3">Designing Application for Elastic Load, Not Predictive Load
</h1><div class="post-meta mb-3"><span class="post-date me-2">
<i class="fas fa-fw fa-calendar-alt"></i>Sep 22, 2021
</span><span class="post-reading-time me-2">
<i class="fas fa-fw fa-coffee"></i>5 min read
</span><span class=post-taxonomies><a href=/categories/architecture/ class=post-taxonomy>Architecture</a><a href=/tags/system-design/ class=post-taxonomy>System Design</a><a href=/tags/distributed-systems/ class=post-taxonomy>Distributed Systems</a></span>
</div>
<div class="post-share mb-3"></div><div class="offcanvas offcanvas-end surface" tabindex=-1 id=offcanvasTOC aria-labelledby=offcanvasTOCLabel>
<div class=offcanvas-header>
<h5 class=offcanvas-title id=offcanvasTOCLabel>Table Of Contents</h5>
<a role=button data-bs-dismiss=offcanvas aria-label=Close>
<span class="fas fa-2x fa-fw fa-times"></span>
</a>
</div>
<div class=offcanvas-body>
<nav id=TableOfContents>
<ul>
<li><a href=#adopting-microservice-architecture>Adopting Microservice Architecture</a></li>
<li><a href=#modern-cloud-deployment>Modern Cloud Deployment</a></li>
<li><a href=#polyglot-persistence>Polyglot Persistence</a></li>
<li><a href=#asynchronous-messaging>Asynchronous Messaging</a></li>
<li><a href=#non-blocking-processing>Non-Blocking Processing</a></li>
<li><a href=#deployment-with-immutable-infrastructure>Deployment with Immutable Infrastructure</a></li>
<li><a href=#zero-trust-architecture-for-security>Zero trust architecture for security</a></li>
<li><a href=#distributed-logging>Distributed logging</a></li>
<li><a href=#designing-system-for-failure-recovery-not-to-avoid-failures>Designing system for failure recovery not to avoid failures</a></li>
<li><a href=#conclusion>Conclusion</a></li>
</ul>
</nav>
</div>
</div><div class="post-content mb-3"><p>With the exponential growth of digital users, systems are designed to sustain the high load and be responsive under such
load.</p>
<p>Earlier, systems were designed for the predictive load like 10k active users. With today&rsquo;s demand, designing a
system for predictive load is not a good approach, as it is hard to predict the load after some months or years. To meet
these challenges, systems are designed to handle the elastic load, which could sustain under high load and still be
responsive to requests.</p>
<p>Below are some points to consider for making the system highly scalable for the elastic load.</p>
<h2 id=adopting-microservice-architecture>Adopting Microservice Architecture</h2>
<p>The biggest problem with Monolith is scalability. Monolith Architecture allows vertical scaling of hardware like an
increase in CPU, RAM, etc. But vertical scaling has some limitations. For example, we could have a maximum of 64 GB of
RAM, 32-core CPU. Monolith architecture fails to serve unpredictable high load after some threshold.</p>
<p>Microservice architecture is a style of designing architecture where a system is a collection of multiple small services
based on its domain, characteristics, and team working on it. Each small service is a microservice that can be deployed
independently and could have multiple replicas. The load gets distributed amongst these replicas. Major benefits of
using microservice architecture are -</p>
<ul>
<li>Make the system highly scalable by scaling the number of replicas.</li>
<li>Provide the ability for each microservice to scale differently. For example, On an e-commerce website, where product
search service has more load than checkout service. In this case, the product catalog could have more replicas than
checkout.</li>
<li>In a monolith, the entire system is deployed on a single machine. In case of high load on a component affect other
component&rsquo;s performance, as resources are shared. Whereas each microservice has its dedicated resources.</li>
</ul>
<p><img class=img-fluid alt=microservice_architecture src=/images/microservice_architecture.png width=791 height=301 loading=lazy>
</p>
<h2 id=modern-cloud-deployment>Modern Cloud Deployment</h2>
<p>On-premise traditional deployment is not scalable under unpredicted high load, as limited resources are kept reserved
for such incidents. It is recommended to use Modern Clouds like AWS, Azure, GCP, etc. These cloud providers offer high
availability and provision to scale applications automatically under high load.</p>
<h2 id=polyglot-persistence>Polyglot Persistence</h2>
<p>The microservice architecture enables building each microservice to have a different programming language and
persistence. A microservice could use different persistence storage for data based on query or requirement. For example,
A Product Catalog Service uses the following persistence -</p>
<ul>
<li>ElasticSearch for text-based search.</li>
<li>Redis Cache for trending/featured products.</li>
<li>NoSQL database for storing users/products/transactions.</li>
<li>RDBMS for storing metadata for joins and reporting.</li>
</ul>
<p><img class=img-fluid alt="ployglot persistance" src=/images/polyglot_persistance.png width=372 height=262 loading=lazy>
</p>
<h2 id=asynchronous-messaging>Asynchronous Messaging</h2>
<p>In Asynchronous messaging, a microservice sends a message to another microservice through a queuing system. a
microservice publishes the message to a queue, the queuing system delivers the message to the recipient microservice (
consumer).</p>
<p>There are some advantages of asynchronous messaging over synchronous point-to-point communication.</p>
<ul>
<li>Recipient microservice (Consumer) need not be available all the time. if a consumer goes offline due to failure,
messages are retained in the queue and once the consumer is online, pending messages are delivered and processed in an
ordered fashion.</li>
<li>Multiple consumers subscribe to a queue. Each consumer gets their copy.</li>
<li>Multiple instances of a consumer could distribute the load.</li>
</ul>
<p><img class=img-fluid alt=asynchronous_messaging.svg src=/images/asynchronous_messaging.png width=531 height=301 loading=lazy>
</p>
<h2 id=non-blocking-processing>Non-Blocking Processing</h2>
<p>In synchronous processing, During I/O operation like an HTTP post request, Thread waits for I/O operation to get
completed and resumes processing next instruction after I/O operation. These kinds of I/O operations are called blocking
I/O.</p>
<p>In non-Blocking processing, Pool of Threads runs the application. During I/O operation Threads do not wait for I/O
operation to get over but joins the Thread pool. When the I/O operation completes, a thread is popped from the Thread
pool to process the next instruction. The popped Thread could be any other thread or the same Thread that initiated I/O.</p>
<p>Non-Blocking processing optimizes resource utilization as Thread does multiple operations rather than waiting for
blocking I/O operation. Hence system I/O throughput increases, the system could serve more requests concurrently.</p>
<h2 id=deployment-with-immutable-infrastructure>Deployment with Immutable Infrastructure</h2>
<p>An immutable infrastructure is an approach where a newer version of application deployment replaces the previous version
rather than updating it.</p>
<p>Rolling-Update and Recreate are popular strategies for deployments.</p>
<p><img class=img-fluid alt="immutable Infrastructure" src=/images/Immutable_Infrastructure.png width=849 height=234 loading=lazy>
</p>
<h2 id=zero-trust-architecture-for-security>Zero trust architecture for security</h2>
<p><strong>Defense of perimeter</strong> is a popular concept where a network boundary is created around private systems. Auth Gateways
act as a gatekeeper to provide access to private and internal systems. Internal private systems that communicate
internally are not required to have access control. It has been observed that most of the security incidents reported
were compromised via internal systems.</p>
<p><strong>Zero Trust Architecture</strong> is a concept where a system must not trust another system or user based on internal or
external to its perimeter. In simpler words, each system must authenticate and authorize every request irrespective of
network or organization perimeter.</p>
<p><img class=img-fluid alt="zero trust architecture" src=/images/zero_trust_network.png width=646 height=580 loading=lazy>
</p>
<h2 id=distributed-logging>Distributed logging</h2>
<p>Troubleshooting and debugging issues are in the microservice architecture are difficult as requests and responses pass
through multiple systems. A centralized and externalized logging system is used for all the logs. All microservice sends
log messages with a Correlation ID to the logging system, where system logs are analyzed.</p>
<h2 id=designing-system-for-failure-recovery-not-to-avoid-failures>Designing system for failure recovery not to avoid failures</h2>
<p>Design the system keeping in mind that failure will occur and the system must recover from it. For example, A
microservice must restart itself in case of memory overflow.</p>
<p>MTBF and MTTR are popular parameters to measure the system reliability of repairable systems.</p>
<blockquote>
<p>MTBF (mean-time-between-failures) is used to know the expected time between two failures for a repairable system.</p>
</blockquote>
<blockquote>
<p>MTTR (mean-time-to-recover) is used to predict the expected time to recover after failure.</p>
</blockquote>
<h2 id=conclusion>Conclusion</h2>
<p>Designing application for elastic load makes the system complex and increases development and maintenance costs. Not all
applications require to handle the elastic load. Some applications are built for a smaller user group e.g. employee
management system, where it is unlikely to have a high load, as the increase in employees will not happen overnight.</p>
<p>Usually, applications that are exposed to the public domain, require to handle such a huge load and unpredictable
events.</p></div><hr><div class="post-navs d-flex mb-3 justify-content-between">
<div class="post-nav w-50"><div class="prev-post btn btn-sm">
<a href=/about/>About
</a>
</div></div>
<div class="post-nav flex-row-reverse"></div>
</div></article><div class="post-comments surface row"></div></div>
</div><aside class="col-lg-4 sidebar d-flex">
<div class=container><section class="profile profile-compact surface row">
<div class="col-xl-6 d-flex align-items-center justify-content-center"><img class="profile-avatar rounded-circle" alt="Akshay Bansod" src=/images/profile.jpeg width=320 height=320 loading=lazy>
</div>
<div class="col-xl-6 profile-meta"><div class=profile-name>Akshay Bansod</div><div class=profile-bio>Developer</div><div class=profile-company><i class="fas fa-fw fa-building"></i>ThoughtWorks</div><div class=profile-location><i class="fas fa-fw fa-map-marker-alt"></i>Earth</div><div class=profile-about><i class="fas fa-fw fa-info-circle"></i><a target=_blank rel="noopener noreferrer" href=https://www.linkedin.com/in/akshaybansod>About Me</a></div></div>
</section>
<section class="recent-posts row surface">
<h4>Recent Posts</h4>
<ul><li><a href=/posts/designing-system-for-elastic-load/>Designing Application for Elastic Load, Not Predictive Load
</a></li></ul>
</section><section class="taxonomy-categories row surface">
<h4>
<a href=/categories>Categories</a>
</h4>
<div><a href=/categories/architecture/ class="post-taxonomy rounded btn btn-sm me-2 mb-2" title=Architecture>
Architecture <span class="badge rounded-pill">1</span>
</a></div>
</section><section class="taxonomy-tags row surface">
<h4>
<a href=/tags>Tags</a>
</h4>
<div><a href=/tags/distributed-systems/ class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="Distributed Systems">
Distributed Systems <span class="badge rounded-pill">1</span>
</a><a href=/tags/system-design/ class="post-taxonomy rounded btn btn-sm me-2 mb-2" title="System Design">
System Design <span class="badge rounded-pill">1</span>
</a></div>
</section></div>
</aside>
</div>
</main><footer class="footer mt-auto py-3 text-center container"><nav class="social-links nav my-2 justify-content-center"></nav>
<div class="copyright mb-2">
Copyright © 2020-2021 Akshay Bansod. All Rights Reserved.
</div>
</footer>
<a id=btnScrollToTop class=btn-scroll-to-top>
<i class="fas fa-fw fa-chevron-circle-up fa-2x"></i>
</a>
</body>
</html>